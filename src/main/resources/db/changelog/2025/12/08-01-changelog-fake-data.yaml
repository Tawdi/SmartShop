databaseChangeLog:
  - changeSet:
      id: insert-test-data-1
      author: admin
      changes:
        # ===================================================================
        # 1. USERS (CLIENTS) - 5 clients | password = "password"
        # ===================================================================
        - insert:
            tableName: users
            columns:
              - column: { name: id, value: "c1111111-1111-1111-1111-111111111111" }
              - column: { name: username, value: "client1" }
              - column: { name: password, value: "$2a$12$LsFYIGm8juz3em7S371FAunthpP6GoXpWu6sm7OhU.2Bhq2seQef2" } # mot de passe = "password"
              - column: { name: role, value: "CLIENT" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: users
            columns:
              - column: { name: id, value: "c2222222-2222-2222-2222-222222222222" }
              - column: { name: username, value: "client2" }
              - column: { name: password, value: "$2a$12$LsFYIGm8juz3em7S371FAunthpP6GoXpWu6sm7OhU.2Bhq2seQef2" }
              - column: { name: role, value: "CLIENT" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: users
            columns:
              - column: { name: id, value: "c3333333-3333-3333-3333-333333333333" }
              - column: { name: username, value: "client3" }
              - column: { name: password, value: "$2a$12$LsFYIGm8juz3em7S371FAunthpP6GoXpWu6sm7OhU.2Bhq2seQef2" }
              - column: { name: role, value: "CLIENT" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: users
            columns:
              - column: { name: id, value: "c4444444-4444-4444-4444-444444444444" }
              - column: { name: username, value: "client4" }
              - column: { name: password, value: "$2a$12$LsFYIGm8juz3em7S371FAunthpP6GoXpWu6sm7OhU.2Bhq2seQef2" }
              - column: { name: role, value: "CLIENT" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: users
            columns:
              - column: { name: id, value: "c5555555-5555-5555-5555-555555555555" }
              - column: { name: username, value: "client5" }
              - column: { name: password, value: "$2a$12$LsFYIGm8juz3em7S371FAunthpP6GoXpWu6sm7OhU.2Bhq2seQef2" }
              - column: { name: role, value: "CLIENT" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        # ===================================================================
        # 2. CLIENTS (entité métier liée aux users)
        # ===================================================================
        - insert:
            tableName: clients
            columns:
              - column: { name: id, value: "clt-0001-1111-1111-1111-111111111111" }
              - column: { name: name, value: "TechSolutions SARL" }
              - column: { name: email, value: "client1@microtech.ma" }
              - column: { name: telephone, value: "0522123456" }
              - column: { name: adresse, value: "123 Bd Mohammed V, Casablanca" }
              - column: { name: tier, value: "BASIC" }
              - column: { name: user_id, value: "c1111111-1111-1111-1111-111111111111" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: clients
            columns:
              - column: { name: id, value: "clt-0002-2222-2222-2222-222222222222" }
              - column: { name: name, value: "Informatique Pro" }
              - column: { name: email, value: "client2@microtech.ma" }
              - column: { name: telephone, value: "0522987654" }
              - column: { name: adresse, value: "45 Rue Ibn Tachfine, Casablanca" }
              - column: { name: tier, value: "BASIC" }
              - column: { name: user_id, value: "c2222222-2222-2222-2222-222222222222" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: clients
            columns:
              - column: { name: id, value: "clt-0003-3333-3333-3333-333333333333" }
              - column: { name: name, value: "Digital Hub Maroc" }
              - column: { name: email, value: "client3@microtech.ma" }
              - column: { name: tier, value: "BASIC" }
              - column: { name: user_id, value: "c3333333-3333-3333-3333-333333333333" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: clients
            columns:
              - column: { name: id, value: "clt-0004-4444-4444-4444-444444444444" }
              - column: { name: name, value: "PC Store Casa" }
              - column: { name: email, value: "client4@microtech.ma" }
              - column: { name: tier, value: "BASIC" }
              - column: { name: user_id, value: "c4444444-4444-4444-4444-444444444444" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: clients
            columns:
              - column: { name: id, value: "clt-0005-5555-5555-5555-555555555555" }
              - column: { name: name, value: "InfoPlus SARL" }
              - column: { name: email, value: "client5@microtech.ma" }
              - column: { name: tier, value: "BASIC" }
              - column: { name: user_id, value: "c5555555-5555-5555-5555-555555555555" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        # ===================================================================
        # 3. PRODUCTS -  produits avec stock suffisant
        # ===================================================================
        - insert:
            tableName: products
            columns:
              - column: { name: id, value: "prod1111-1111-1111-1111-111111111111" }
              - column: { name: reference, value: "LAP-DL15" }
              - column: { name: name, value: "Dell Latitude 5520 i7" }
              - column: { name: priceht, value: "12500.00" }
              - column: { name: stock, value: 25 }
              - column: { name: deleted, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: products
            columns:
              - column: { name: id, value: "prod2222-2222-2222-2222-222222222222" }
              - column: { name: reference, value: "HP-ELITE850" }
              - column: { name: name, value: "HP EliteBook 850 G8" }
              - column: { name: priceht, value: "14800.00" }
              - column: { name: stock, value: 18 }
              - column: { name: deleted, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: products
            columns:
              - column: { name: id, value: "prod3333-3333-3333-3333-333333333333" }
              - column: { name: reference, value: "MON-SAM27" }
              - column: { name: name, value: "Écran Samsung 27\" 4K" }
              - column: { name: priceht, value: "4200.00" }
              - column: { name: stock, value: 40 }
              - column: { name: deleted, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: products
            columns:
              - column: { name: id, value: "prod4444-4444-4444-4444-444444444444" }
              - column: { name: reference, value: "RAM-32GB" }
              - column: { name: name, value: "RAM DDR4 32Go 3200MHz" }
              - column: { name: priceht, value: "1850.00" }
              - column: { name: stock, value: 80 }
              - column: { name: deleted, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: products
            columns:
              - column: { name: id, value: "prod5555-5555-5555-5555-555555555555" }
              - column: { name: reference, value: "SSD-1TB" }
              - column: { name: name, value: "SSD NVMe 1To Samsung" }
              - column: { name: priceht, value: "1350.00" }
              - column: { name: stock, value: 120 }
              - column: { name: deleted, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }


        # ===================================================================
        # 4. PROMO CODES
        # ===================================================================
        - insert:
            tableName: promo_code
            columns:
              - column: { name: code, value: "PROMO-HOME" }
              - column: { name: discount_rate, value: "0.5" }
              - column: { name: used, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: promo_code
            columns:
              - column: { name: code, value: "PROMO-MARS" }
              - column: { name: discount_rate, value: "0.3" }
              - column: { name: used, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: promo_code
            columns:
              - column: { name: code, value: "PROMO-AB12" }
              - column: { name: discount_rate, value: "0.05" }
              - column: { name: used, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: promo_code
            columns:
              - column: { name: code, value: "PROMO-CD34" }
              - column: { name: discount_rate, value: "0.10" }
              - column: { name: used, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: promo_code
            columns:
              - column: { name: code, value: "PROMO-EF56" }
              - column: { name: discount_rate, value: "0.15" }
              - column: { name: used, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: promo_code
            columns:
              - column: { name: code, value: "PROMO-GH78" }
              - column: { name: discount_rate, value: "0.20" }
              - column: { name: used, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: promo_code
            columns:
              - column: { name: code, value: "PROMO-IJ90" }
              - column: { name: discount_rate, value: "0.25" }
              - column: { name: used, value: false }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        # ===================================================================
        # 5. ORDERS - 2 commandes PENDING pour les 2 premiers clients (sans paiement)
        # ===================================================================
        - insert:
            tableName: orders
            columns:
              - column: { name: id, value: "ord11111-1111-1111-1111-111111111111" }
              - column: { name: order_date, valueComputed: "NOW()" }
              - column: { name: subtotalht, value: "26900.00" }
              - column: { name: discount_amount, value: "0.00" }
              - column: { name: tva_amount, value: "5380.00" }
              - column: { name: totalttc, value: "32280.00" }
              - column: { name: remaining_amount, value: "32280.00" }
              - column: { name: status, value: "PENDING" }
              - column: { name: client_id, value: "clt-0001-1111-1111-1111-111111111111" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: orders
            columns:
              - column: { name: id, value: "ord22222-2222-2222-2222-222222222222" }
              - column: { name: order_date, valueComputed: "NOW()" }
              - column: { name: subtotalht, value: "16150.00" }
              - column: { name: discount_amount, value: "0.00" }
              - column: { name: tva_amount, value: "3230.00" }
              - column: { name: totalttc, value: "19380.00" }
              - column: { name: remaining_amount, value: "19380.00" }
              - column: { name: status, value: "PENDING" }
              - column: { name: client_id, value: "clt-0002-2222-2222-2222-222222222222" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        # ===================================================================
        # 6. ORDER ITEMS pour les 2 commandes
        # ===================================================================
        # Commande 1 - Client 1
        - insert:
            tableName: order_items
            columns:
              - column: { name: quantity, value: 2 }
              - column: { name: unit_priceht, value: "12500.00" }
              - column: { name: line_totalht, value: "25000.00" }
              - column: { name: order_id, value: "ord11111-1111-1111-1111-111111111111" }
              - column: { name: product_id, value: "prod1111-1111-1111-1111-111111111111" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: order_items
            columns:
              - column: { name: quantity, value: 1 }
              - column: { name: unit_priceht, value: "4200.00" }
              - column: { name: line_totalht, value: "4200.00" }
              - column: { name: order_id, value: "ord11111-1111-1111-1111-111111111111" }
              - column: { name: product_id, value: "prod3333-3333-3333-3333-333333333333" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        # Commande 2 - Client 2
        - insert:
            tableName: order_items
            columns:
              - column: { name: quantity, value: 1 }
              - column: { name: unit_priceht, value: "14800.00" }
              - column: { name: line_totalht, value: "14800.00" }
              - column: { name: order_id, value: "ord22222-2222-2222-2222-222222222222" }
              - column: { name: product_id, value: "prod2222-2222-2222-2222-222222222222" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }

        - insert:
            tableName: order_items
            columns:
              - column: { name: quantity, value: 3 }
              - column: { name: unit_priceht, value: "1350.00" }
              - column: { name: line_totalht, value: "4050.00" }
              - column: { name: order_id, value: "ord22222-2222-2222-2222-222222222222" }
              - column: { name: product_id, value: "prod5555-5555-5555-5555-555555555555" }
              - column: { name: created_at, valueComputed: "NOW()" }
              - column: { name: updated_at, valueComputed: "NOW()" }